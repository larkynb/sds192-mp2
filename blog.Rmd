---
title: "Mini-Project 2"
author: "Caroline, Larkyn, Patience"
date: "March 24, 2017"
output: html_document
---

```{r, message=FALSE, warning=FALSE, include=FALSE}
load("house_elections.rda")
load("candidates.rda")
load("committees.rda")
load("contributions.rda")
library(dplyr)
library(ggplot2)
```

```{r, message=FALSE, warning=FALSE, include=FALSE}
library(dplyr)
library(ggplot2)
library(ggthemes)
```

![](http://www.mememaker.net/static/images/memes/4451528.jpg)

##We intend to join the contribution table and the candidate table so that we can visualise where the two major political parties recieve their money from (i.e. individuals, committees etc.).
```{r}
#Here, we used select to look at only certain columns from the contributions table, and we grouped by entity type.
contrib <- contributions %>%
  select(entity_type, transaction_amt, cand_id) %>%
  group_by(entity_type)
contrib 
```

```{r}
#We again selected certain columns from this data set. We noticed that the contributions and candidates tables had the column "cand_id" in common. So, we needed both the cand_id column in order to join, and we needed the data from the party affiliation column in order to visualize how much money was given to each party.
candid <- candidates %>%
  select(cand_party_affiliation, cand_id)
candid
```

```{r}
#Here, we joined the two tables by "cand_id", the column that the candidates and contributions table had in common. We used a left join because we wanted to keep the data from the contributions table to remain, but wanted to add data from the candidates table.
money <- contrib %>%
  left_join(candid, by = "cand_id")
money
```
```{r}
#In order to see how much each entity type contributed, we need to make a new column that displays this, and we needed to group by entity type and party affiliation.
com_con <- money %>%
  filter(cand_party_affiliation == "DEM" | cand_party_affiliation == "REP") %>%
  group_by(entity_type, cand_party_affiliation) %>%
  summarize(total_contribution = sum(transaction_amt)) %>%
  filter(total_contribution != 70805827 & total_contribution != 54333878)
com_con

#table(money$entity_type)
```


```{r}
vis <- ggplot(data = com_con, aes(x = entity_type, y = total_contribution, fill = cand_party_affiliation)) +
  geom_bar(stat = "identity") +
  ggtitle("Committee Contribution By Party") +
  xlab("Entity Type") +
  ylab("Contribution Amount") +
  theme(panel.grid.major = element_blank(),
        panel.grid.minor = element_blank(),
        axis.title.x = element_text(size = 18),
        axis.title.y = element_text(size = 18)) +
 guides(fill=guide_legend(title="Party")) +
  scale_fill_manual(guide_legend, values=c("Blue", "Red"), 
                    labels=c("Democrat", "Republican")) +
  scale_y_continuous(breaks=c(0.00e+00, 2.50e+08, 5.00e+08, 7.50e+08, 1.00e+09, 1.25e+09), 
                     labels=c("$0", "$250,000,000", "$500,000,000", "$750,000,000", "$1,000,000,000","$1,250,000,000")) +
  theme_economist_white()
  
vis
```

##Context:
Our data is taken from the Federal Election Commission, and we focused on archived data from the 2011-2012 election. The “entity_types” are the sources of the contributions, essentially they are the different committees.


##What we can Learn from the Data:
The data tells us the total contributions made by committees for the Democratic and Republican parties.






